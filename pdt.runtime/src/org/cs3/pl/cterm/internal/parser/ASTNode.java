/**
 * 
 */
package org.cs3.pl.cterm.internal.parser;

public class ASTNode extends SimpleNode {
	private String functor;
	private String image;

	public ASTNode(int i) {
		super(i);
	}


	public ASTNode(CanonicalTermParser p, int i) {
		super(p, i);
	}

	/*
	 * This method was added by hand to code generated by jjtree. 
	 * 
	 * TODO: include in canonical_term.jjt
	 */
	public String getFunctorImage() {
		if(functor != null){
			return functor;
		}
		StringBuffer sb = new StringBuffer();
		Token t = jjtGetFirstToken();
		do{
			sb.append(t.image);
			t=t.next;
		} while(canGetAnotherToken(t)&&
			 !t.image.equals("("));
		functor = sb.toString();
		return functor;
	}
	
	/*
	 * image caching code was added by hand to the code generated by jjtree. 
	 * 
	 * TODO: include in canonical_term.jjt
	 */

	public String getImage(){
		if(image != null){
			return image;
		}		
		StringBuffer sb = new StringBuffer();
		for(Token t = jjtGetFirstToken();canGetAnotherToken(t);t=t.next){
			sb.append(t.image);
		}
		image = sb.toString();
		return image;
	}
	
	private boolean canGetAnotherToken(Token t) {
		if (t==null) 
			return false;
		if (t==lastToken.next)
			return false;
		return true;
	}
	
}
