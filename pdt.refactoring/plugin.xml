<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
  <extension point="org.eclipse.ui.commands">
    <command categoryId="org.cs3.pdt.editing" id="org.cs3.pdt.refactoring.rename" name="Prolog Refactor" />
  </extension>
  
  <extension point="org.eclipse.ui.handlers">
    <handler commandId="org.cs3.pdt.refactoring.rename" class="org.cs3.pdt.refactoring.PDTRefactoringHandler" />
  </extension>
  
  <extension point="org.eclipse.ui.menus">
    <menuContribution locationURI="popup:org.eclipse.ui.popup.any?before=additions">
      <menu id="org.cs3.pdt.refactoring.RefactoringMenu" label="Prolog Refactoring">
        <command commandId="org.cs3.pdt.refactoring.rename" id="org.cs3.pdt.refactoring.rename.popupmenu" label="Rename Prolog Element...">
          <visibleWhen checkEnabled="false">
            <with variable="selection">
              <iterate ifEmpty="false" operator="or">
                <or>
                  <adapt type="org.eclipse.core.resources.IResource">
                    <or>
                      <test property="org.eclipse.core.resources.extension" value="pl" />
                    </or>
                  </adapt>
                  <with variable="activeEditorInput">
                    <adapt type="org.eclipse.core.resources.IResource">
                      <or>
                        <test property="org.eclipse.core.resources.extension" value="pl" />
                      </or>
                    </adapt>
                  </with>
                </or>
              </iterate>
            </with>
          </visibleWhen>
        </command>
      </menu>
    </menuContribution>
  </extension>
  
  
  	<!-- The prolog files that will be consulted. -->
	<extension point="org.cs3.pdt.connector.bootstrapContribution">
	  <fileContribution
		 id="pdt.refactoring.contribution"
		 path="pl/load.pl"
		 key="pdt.bootstrap.contribution.key">
		 <dependency
		    contribution="org.cs3.pdt.common.fileContribution">
		 </dependency>
	  </fileContribution>
	</extension>
            
  
</plugin>